@page "/LeaderboardsDuongLNTs/LeaderboardsDuongLNTDetail/{id:int}"

@using SmokeQuit.GraphQLClients.BlazorWAS.DuongLNT.GraphQLClients
@using SmokeQuit.GraphQLClients.BlazorWAS.DuongLNT.Models

@* Dùng để gọi các API GraphQL *@
@inject GraphQLConsumer _graphQLConsumer
@inject NavigationManager Navigation

<h3 class="mt-3">Chi tiết Leaderboard</h3>

@if (leaderboard == null)
{
	<p>Đang tải dữ liệu...</p>
}
else
{
	<div class="card">
		<div class="card-body">
			<h5 class="card-title">ID: @leaderboard.LeaderboardsDuongLntid</h5>
			<p class="card-text"><strong>Ngày không hút:</strong> @leaderboard.DaySmokeFree</p>
			<p class="card-text"><strong>Tiết kiệm:</strong> @leaderboard.MoneySave</p>
			<p class="card-text"><strong>Thứ hạng:</strong> @leaderboard.RankPosition</p>
			<p class="card-text"><strong>Thành tựu:</strong> @leaderboard.TotalAchievements</p>
			<p class="card-text"><strong>Ghi chú:</strong> @leaderboard.Note</p>
			<p class="card-text"><strong>Top Rank?</strong> @(leaderboard.IsTopRanked ? "✅" : "❌")</p>
			<p class="card-text"><strong>Ngày tạo:</strong> @leaderboard.CreatedTime?.ToString("dd/MM/yyyy")</p>
			<p class="card-text"><strong>User ID:</strong> @(leaderboard.User?.UserAccountId ?? 0)</p>
			<p class="card-text"><strong>Plan ID:</strong> @(leaderboard.Plan?.QuitPlansAnhDtnid ?? 0)</p>
			<button class="btn btn-secondary" @onclick="@(() => Navigation.NavigateTo("/LeaderboardsDuongLNTs/LeaderboardsDuongLNTList"))">
				Quay lại danh sách
			</button>
		</div>
	</div>
}

@code {
	[Parameter]
	public int id { get; set; }

	private LeaderboardsDuongLnt? leaderboard;

	protected override async Task OnInitializedAsync()
	{
		leaderboard = await _graphQLConsumer.GetLeaderboardsDuongLntById(id);
	}
}
